{{> header}}

<section id="cabecera">
    <video autoplay muted loop id="video-fondo">
        <source src="videoavion.mp4" type="video/mp4">
    </video>
    <div class="contenido-cabecera"> 
        <h2>Traveling was never so easy.</h2>
        <p>In Eurotravel we offered excursions and adventures ready to enjoy. You only have to choose the destiny, we take care of the trouble. <strong>¡Get ready to write your next story with us!</strong></p>
    </div>
</section>

<form action="/" method="GET" class="d-flex mb-4">
    <input class="form-control me-2" 
            type="search" 
            placeholder="Busque su viaje" 
            name="searchQuery"
            value="{{searchTerm}}"> {{#category}}
    <input type="hidden" name="category" value="{{category}}">
    {{/category}}
            
    <button class="btn btn-outline-success" type="submit">Buscar</button>

    <a href="/new" class="btn button btn-dark" id="b1">Add new trip</a>
</form>

<div class="mb-4">
    <h5>Categorías:</h5>
    <a href="/?category=Adventure&searchQuery={{searchTerm}}" 
       class="btn {{#pagination.isCategoryActive.Adventure}}btn-primary{{else}}btn-outline-primary{{/pagination.isCategoryActive.Adventure}}">
       Adventure
    </a>
    <a href="/?category=Culture&searchQuery={{searchTerm}}" 
       class="btn {{#pagination.isCategoryActive.Culture}}btn-primary{{else}}btn-outline-primary{{/pagination.isCategoryActive.Culture}}">
       Culture
    </a>
    <a href="/?category=Relax&searchQuery={{searchTerm}}" 
       class="btn {{#pagination.isCategoryActive.Relax}}btn-primary{{else}}btn-outline-primary{{/pagination.isCategoryActive.Relax}}">
       Relax
    </a>
    
    <a href="/" class="btn btn-outline-danger">Limpiar filtros</a>
</div>

<section class="container my-5">
    <h2 class="">TRIPS</h2>
    
    <div class="row g-4" id="trip-results">
        
        {{#trips}}
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card h-100 shadow-sm">
                <img src="/trip/{{_id}}/image" class="card-img-top" alt="{{name}}">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{name}}</h5>
                    <p class="card-text flex-grow-1">{{description}}...</p>
                    <span class="badge bg-primary align-self-start mb-2">{{t_trip}}</span>
                    <p class="card-text text-end h4"><strong>{{price}}€</strong></p>
                    <a href="/trip/{{_id}}" class="btn btn-dark mt-auto">Ver Detalles</a> 
                </div>
            </div>
        </div>
        {{/trips}}

        {{^trips}}
        <p class="text-center text-muted">No se encontraron viajes.</p>
        {{/trips}}
    </div>
    
    <nav aria-label="Trip pagination" class="mt-5">
        <ul class="pagination justify-content-center">
            
            {{#pagination.hasPrev}}
                <li class="page-item">
                    <a class="page-link" href="/?page={{pagination.prevPage}}&searchQuery={{searchTerm}}&category={{category}}">Anterior</a>
                </li>
            {{/pagination.hasPrev}}
            {{^pagination.hasPrev}}
                <li class="page-item disabled"><span class="page-link">Anterior</span></li>
            {{/pagination.hasPrev}}

            {{#pagination.pages}}
                <li class="page-item {{#isCurrent}}active{{/isCurrent}}">
                    <a class="page-link" href="/?page={{number}}&searchQuery={{searchTerm}}&category={{category}}">{{number}}</a>
                </li>
            {{/pagination.pages}}
            
            {{#pagination.hasNext}}
                <li class="page-item">
                    <a class="page-link" href="/?page={{pagination.nextPage}}&searchQuery={{searchTerm}}&category={{category}}">Siguiente</a>
                </li>
            {{/pagination.hasNext}}
            {{^pagination.hasNext}}
                <li class="page-item disabled"><span class="page-link">Siguiente</span></li>
            {{/pagination.hasNext}}

        </ul>
    </nav>
</section>

{{> footer}}