{{> header}}

<div class="form-align">
    <div class="form-container">
        <h2>
            {{#isEditing}}Edit Trip: {{formData.name}}{{/isEditing}}
            {{^isEditing}}New Trip{{/isEditing}}
        </h2>

        {{#errors}}
        <div class="alert alert-danger" style="color: red; border: 1px solid red; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
            <strong>Please, fix this errors</strong>
            <ul>
                {{#errors}} <li>{{.}}</li>
                {{/errors}}
            </ul>
        </div>
        {{/errors}}

        <form action="{{#isEditing}}/edit/trip/{{tripId}}{{/isEditing}}{{^isEditing}}/new{{/isEditing}}" method="POST" enctype="multipart/form-data">
            
            <label for="name">Main city (Name):</label>
            <input type="text" id="name" name="name" 
                    required 
                    minlength="3" 
                    pattern="[A-Z].*" 
                    title="It must start with a capital letter and have at least 3 characters."
                    value="{{formData.name}}">

            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4" 
                        required 
                        minlength="10" 
                        maxlength="200" 
                        placeholder="Minimum 10 characters, maximum 200.">{{formData.description}}</textarea>

            <label for="duration">Duration (days):</label>
            <input type="number" id="duration" name="duration" 
                    required 
                    min="1" 
                    max="100" 
                    step="1" 
                    placeholder="1"
                    value="{{formData.duration}}">

            <label for="image">Image:</label>
            <input type="file" id="image" name="image" 
                    accept="image/jpeg,image/jpg,image/png,image/webp">
            {{#isEditing}}
                Leave blank to keep the current image.
            {{/isEditing}}

            <label for="price">Price (€):</label>
            <input type="number" id="price" name="price" 
                    required 
                    min="0" 
                    max="100000" 
                    step="1" 
                    placeholder="0€"
                    value="{{formData.price}}">

            <label for="t_trip">Type of trip:</label>
            <select id="t_trip" name="t_trip" required>
                <option value="">Select a type</option>
                <option value="Adventure" {{#formData.t_trip.adventure}}selected{{/formData.t_trip.adventure}}>Adventure</option>
                <option value="Culture" {{#formData.t_trip.culture}}selected{{/formData.t_trip.culture}}>Culture</option>
                <option value="Relax" {{#formData.t_trip.relax}}selected{{/formData.t_trip.relax}}>Relax</option>
            </select>

            <div class="checkbox-group">
                <label for="flight">Need a flight?</label>
                <input type="checkbox" id="flight" name="flight" {{#formData.flight}}checked{{/formData.flight}}>
            </div>

            <div class="checkbox-group">
                <label for="national">Is it international?</label>
                <input type="checkbox" id="national" name="national" {{#formData.national}}checked{{/formData.national}}>
            </div>

            <label for="max_travellers">People:</label>
            <input type="number" id="max_travellers" name="max_travellers" 
                    required 
                    min="1" 
                    max="100" 
                    step="1" 
                    placeholder="1"
                    value="{{formData.max_travellers}}">
            
            <button type="submit" class="btn button btn-dark">{{#isEditing}}Update Trip{{/isEditing}}{{^isEditing}}Create{{/isEditing}}</button>
            <a href="/" class="btn button btn-dark">Cancel</a> 
        </form>
    </div>
</div>

{{> footer}}